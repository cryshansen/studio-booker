<h2>Create a Booking for {{ studioName }}</h2>
<app-spinner *ngIf="loading"></app-spinner>
<form [formGroup]="bookingForm" (ngSubmit)="onSubmit()">
  <label>
    Event Title:
    <input type="text" formControlName="title" readonly />
    <!--<div *ngIf="bookingForm.get('title')?.touched && bookingForm.get('title')?.invalid" class="text-danger">
      Title is required.
    </div> -->
  </label>
  <br />

  <label>
    Date:
    <input type="date" formControlName="date" />
  </label>
  <div *ngIf="bookingForm.get('date')?.touched && bookingForm.get('date')?.invalid" class="text-danger">
    Date is required.
  </div>
  <br />

  <h4>Available Time Slots:</h4>
  <div *ngFor="let slot of availableSlots()">
    <button
      type="button"
      class="btn btn-outline-primary mb-2"
      [class.active]="isSlotSelected(slot.start)()"
      [disabled]="!slot.available"
      (click)="selectSlot(slot.start)">
      {{ slot.start }} â€“ {{ slot.end }} ({{ slot.price }})
    </button>
  </div>
  <div *ngIf="bookingForm.get('slot')?.touched && bookingForm.get('slot')?.invalid" class="text-danger">
    Please select a time slot.
  </div>

  <input type="hidden" formControlName="slot" />
  <input type="hidden" formControlName="studioId" />
  <input type="hidden" formControlName="price" />

  <br />
  <button type="button" class="btn btn-secondary" (click)="formClosed.emit()">Cancel</button>
  <button type="submit" [disabled]="bookingForm.invalid">Book Now</button>
</form>
